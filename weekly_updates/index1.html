<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Weekly Updates</title>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <style>

    :root {
  --bg: #f9fafb;        /* soft near-white background */
  --panel: #e6edf3;     /* light pastel blue/grey panels */
  --text: #1a1c1e;      /* dark but not harsh black text */
  --muted: #6b7280;     /* muted grey for secondary text */
  --accent: #3b82f6;    /* gentle blue accent */
  --ring: rgba(59, 130, 246, 0.3); /* subtle highlight for focus rings */
}

    html, body { height: 100%; }
    body {
      margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      background: var(--bg); color: var(--text);
    }
    .wrap { max-width: 1200px; margin: 0 auto; padding: 24px; }
    .title { font-size: clamp(28px, 3vw, 40px); margin: 0 0 8px; }
    .sub { color: var(--muted); margin: 0 0 24px; }

    .grid { display: grid; grid-template-columns: 300px 1fr; gap: 24px; }
    @media (max-width: 900px) { .grid { grid-template-columns: 1fr; } }

    .panel { background: var(--panel); border-radius: 16px; box-shadow: 0 6px 24px rgba(0,0,0,.35); }
    .sidebar { padding: 8px; }
    .list { list-style: none; margin: 0; padding: 8px; max-height: 70vh; overflow: auto; }
    .btn {
      display: block; width: 100%; text-align: left; padding: 12px 14px; margin: 6px 0;
      color: var(--text); background: transparent; border: 1px solid transparent;
      border-radius: 12px; cursor: pointer; font: inherit;
    }
    .btn:hover { background: rgba(255,255,255,.04); }
    .btn[aria-current="true"] { background: rgba(79,163,255,.08); border-color: var(--ring); }

    .content { padding: 20px 24px; }
    .content h2 { margin-top: 0; }
    .muted { color: var(--muted); }

    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 8px 10px; border-bottom: 1px solid rgba(255,255,255,.08); text-align: left; }
    code { background: rgba(255,255,255,.08); padding: 2px 6px; border-radius: 6px; }
    a { color: var(--accent); }

    /* Viewer controls */
    .viewerbar{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:14px;}
    .viewerbar .meta{color: var(--muted); font-size: 14px;}
    .viewerbar .controls{display:flex; gap:10px; align-items:center;}
    .chip{
      border: 1px solid rgba(0,0,0,.08);
      background: rgba(255,255,255,.7);
      padding: 8px 10px;
      border-radius: 12px;
      cursor:pointer;
      font: inherit;
    }
    .chip:hover{ box-shadow: 0 0 0 4px var(--ring); }
    #weekHost section{margin:0;}
  </style>
</head>
<body>
  <main class="wrap">
    <h1 class="title">Weekly Updates</h1>
    <!-- <p class="sub">Select a week from the sidebar. Week 1 loads by default.</p> -->

    <section class="grid">
      <aside class="panel sidebar">
        <ul class="list" id="weekNav">
          <li><button class="btn" data-src="week-1.html">Week 1 — Sept 11</button></li>
<li><button class="btn" data-src="week-2.html">Week 2 — Sept 25</button></li>
<li><button class="btn" data-src="week-3.html">Week 3 — OCT 23</button></li>
<li><button class="btn" data-src="week-4.html">Week 4 — Nov 06</button></li>
<li><button class="btn" data-src="week-5.html">Week 5 — Nov 20</button></li>
<li><button class="btn" data-src="week-6.html">Week 6 — Dec 4</button></li>
<li><button class="btn" data-src="week-7.html">Week 7 — Dec 18</button></li>
        </ul>
      </aside>

      <section class="panel content">
        <div class="viewerbar">
          <div class="meta">Now viewing: <strong id="currentTitle">—</strong></div>
          <div class="controls">
            <button class="chip" id="prevBtn" type="button">← Prev</button>
            <button class="chip" id="nextBtn" type="button">Next →</button>
            <a class="chip" id="openBtn" href="#" target="_blank" rel="noopener">Open ↗</a>
          </div>
        </div>

        <div id="weekHost"></div>
      </section>
    </section>
  </main>

  <script>

(function(){
  const buttons = Array.from(document.querySelectorAll('#weekNav .btn'));
  const host = document.getElementById('weekHost');
  const titleEl = document.getElementById('currentTitle');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const openBtn = document.getElementById('openBtn');

  let currentIdx = 0;

  function setActive(idx){
    currentIdx = Math.max(0, Math.min(buttons.length-1, idx));
    const btn = buttons[currentIdx];
    buttons.forEach(b => b.setAttribute('aria-current', b===btn ? 'true' : 'false'));
    const label = btn.textContent.trim();
    titleEl.textContent = label;
    const src = btn.dataset.src;
    openBtn.href = src;
    window.location.hash = encodeURIComponent(src);
    loadWeek(src);
  }

  async function loadWeek(src){
    host.innerHTML = '<p class="muted">Loading…</p>';
    try{
      const res = await fetch(src, {cache: 'no-store'});
      const html = await res.text();
      const doc = new DOMParser().parseFromString(html, 'text/html');
      const section = doc.querySelector('section.week') || doc.querySelector('section.panel.content') || doc.body;
      host.innerHTML = section.outerHTML;

      // Re-run MathJax on injected content (if present)
      if (window.MathJax && MathJax.typesetPromise){
        MathJax.typesetClear && MathJax.typesetClear();
        MathJax.typesetPromise([host]).catch(()=>{});
      }

      // Ensure we start at top when switching weeks
      document.querySelector('main.wrap').scrollTo?.(0,0);
      window.scrollTo(0,0);
    }catch(e){
      host.innerHTML = '<p class="muted">Could not load '+src+'. If you opened this file directly, use a local server (e.g. VS Code Live Server) so fetch() works.</p>';
    }
  }

  function idxFromHash(){
    const raw = (window.location.hash||'').replace('#','');
    if (!raw) return null;
    const src = decodeURIComponent(raw);
    const idx = buttons.findIndex(b => b.dataset.src === src);
    return idx >= 0 ? idx : null;
  }

  buttons.forEach((b, i) => b.addEventListener('click', () => setActive(i)));
  prevBtn.addEventListener('click', () => setActive(currentIdx - 1));
  nextBtn.addEventListener('click', () => setActive(currentIdx + 1));

  const start = idxFromHash();
  setActive(start ?? 0);
})();
  </script>
</body>
</html>
